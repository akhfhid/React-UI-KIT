import{r as i,R as p}from"./main-Bbx2KXsb.js";import{p as F,n as y,c as C}from"./keyboard-BqC3K5VV.js";let A=i.createContext(()=>{});function S({value:e,children:t}){return p.createElement(A.Provider,{value:e},t)}function E(e=0){let[t,n]=i.useState(e),r=i.useCallback(l=>n(l),[t]),s=i.useCallback(l=>n(c=>c|l),[t]),o=i.useCallback(l=>(t&l)===l,[t]),u=i.useCallback(l=>n(c=>c&~l),[n]),a=i.useCallback(l=>n(c=>c^l),[n]);return{flags:t,setFlag:r,addFlag:s,hasFlag:o,removeFlag:u,toggleFlag:a}}var k={},v;typeof process<"u"&&typeof globalThis<"u"&&((v=process==null?void 0:k)==null?void 0:v.NODE_ENV)==="test"&&typeof Element.prototype.getAnimations>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var x=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(x||{});function j(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function _(e,t,n,r){let[s,o]=i.useState(n),{hasFlag:u,addFlag:a,removeFlag:l}=E(e&&s?3:0),c=i.useRef(!1),d=i.useRef(!1),h=F();return y(()=>{var m;if(e){if(n&&o(!0),!t){n&&a(3);return}return(m=r==null?void 0:r.start)==null||m.call(r,n),b(t,{inFlight:c,prepare(){d.current?d.current=!1:d.current=c.current,c.current=!0,!d.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){d.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var g;d.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(c.current=!1,l(7),n||o(!1),(g=r==null?void 0:r.end)==null||g.call(r,n))}})}},[e,n,t,h]),e?[s,{closed:u(1),enter:u(2),leave:u(4),transition:u(2)||u(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function b(e,{prepare:t,run:n,done:r,inFlight:s}){let o=C();return $(e,{prepare:t,inFlight:s}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(O(e,r))})}),o.dispose}function O(e,t){var n,r;let s=C();if(!e)return s.dispose;let o=!1;s.add(()=>{o=!0});let u=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return u.length===0?(t(),s.dispose):(Promise.allSettled(u.map(a=>a.finished)).then(()=>{o||t()}),s.dispose)}function $(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}let f=i.createContext(null);f.displayName="OpenClosedContext";var N=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(N||{});function H(){return i.useContext(f)}function L({value:e,children:t}){return p.createElement(f.Provider,{value:e},t)}function T({children:e}){return p.createElement(f.Provider,{value:null},e)}export{S as C,j as H,_ as R,L as c,N as i,T as s,H as u};
